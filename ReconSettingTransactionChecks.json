{
  "id": "1",
  "name": "Transaction Matches",
  "group": "FY 21-22",
  "dataSources": [
    {
      "id": "sales",
      "predicate": "name='sales' order by id",
      "bucketField": "entityId"
    },
    {
      "id": "tdsLedger",
      "predicate": "name='tdsLedger' order by id",
      "bucketField": "entityId"
    },
    {
      "id": "_26as",
      "predicate": "name='_26as' order by id",
      "bucketField": "entityId"
    }
  ],
  "ruleset": {
    "name": "Transaction Level Matches",
    "type": "EntryWiseOneToManyComparison",
    "terminateWhenTagsPresent": [
      "TRANSACTION_TOTALS_MATCHED_BETWEEN_SALES_AND_TDSLEDGER"
    ],
    "rules": [
      {
        "id": "tds_at_transactions_level_between_sales_and_tds_ledger",
        "expression1": "#valueWithinTolerance(sales.tdsOnSales, tdsLedger.tds, 1.0) && sales.invoiceNo == tdsLedger.invoiceNo",
        "expression": "#multimatch('tds_at_transactions_level_between_sales_and_tds_ledger', sales, tdsLedger, {'invoiceNo'}, {'invoiceNo'}, 'tdsOnSales', 'tds', 1.0)",
        "tagsWhenMatched": [
          "TRANSACTIONS_MATCHED_BETWEEN_SALES_AND_TDSLEDGER"
        ],
        "tagsWhenNotMatched": [
          "TRANSACTIONS_UNMATCHED_BETWEEN_SALES_AND_TDSLEDGER"
        ]
      }
    ]
  }
}